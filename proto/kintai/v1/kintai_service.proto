syntax = "proto3";

package kintai.v1;

import "google/protobuf/wrappers.proto";
import "lib/v1/date.proto";

option go_package = "github.com/pyama2000/xoon-proto/gen/go/kintai/v1;kintaiv1";

message StartRequest {
  enum Place {
    PLACE_UNSPECIFIED = 0;
    PLACE_HOME = 1;
    PLACE_OFFICE = 2;
  }

  Place place = 1;
  repeated google.protobuf.StringValue slack_channel_names = 2 [deprecated = true];
  repeated google.protobuf.StringValue slack_channels = 3;
}

message StartResponse {}

message FinishRequest {
  repeated google.protobuf.StringValue slack_channels = 1;
  optional string content = 2;
}

message GetSummariesRequest {
  enum DateRange {
    DATE_RANGE_UNSPECIFIED = 0;
    DATE_RANGE_WEEKLY = 1;
    DATE_RANGE_MONTHLY = 2;
    DATE_RANGE_QUARTER = 3;
    DATE_RANGE_HALF_YEAR = 4;
  }

  DateRange date_range = 1;
  oneof date_at {
    lib.v1.Date start_to = 2;
    lib.v1.Date finish_from = 3;
  }
}

message GetSummariesResponse {
  message Content {
    lib.v1.Date date = 1;
    string summary = 2;
  }

  repeated Content content = 1;
}

message FinishResponse {}

service KintaiService {
  rpc Start(StartRequest) returns (StartResponse) {}
  rpc Finish(FinishRequest) returns (FinishResponse) {}
  rpc GetSummaries(GetSummariesRequest) returns (GetSummariesResponse) {}
}
